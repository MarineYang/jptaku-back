### jptaku API Test Collection
### VSCode REST Client Extension 사용
### 사용법: 각 요청 위의 "Send Request" 클릭
### 참고: 로그인 후 자동으로 토큰이 설정됩니다

@baseUrl = http://localhost:30001/api

### ================================
### Health Check
### ================================

GET http://localhost:30001/health

### ================================
### Auth API
### ================================

### 1. 회원가입
# @name register
POST {{baseUrl}}/auth/register
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "password123",
  "name": "테스트유저"
}

### 2. 로그인 (토큰 자동 저장)
# @name login
POST {{baseUrl}}/auth/login
Content-Type: application/json

{
  "email": "test@example.com",
  "password": "password123"
}

### 3. 토큰 갱신
# @name refresh
POST {{baseUrl}}/auth/refresh
Content-Type: application/json

{
  "refresh_token": "{{login.response.body.data.refresh_token}}"
}

### 4. 로그아웃
POST {{baseUrl}}/auth/logout

### ================================
### User API (인증 필요)
### ================================

### 5. 내 정보 조회
GET {{baseUrl}}/user/me
Authorization: Bearer {{login.response.body.data.access_token}}

### 6. 프로필 수정
PUT {{baseUrl}}/user/profile
Authorization: Bearer {{login.response.body.data.access_token}}
Content-Type: application/json

{
  "name": "MarineYang"
}

### 7. 온보딩 정보 저장
POST {{baseUrl}}/user/onboarding
Authorization: Bearer {{login.response.body.data.access_token}}
Content-Type: application/json

{
  "level": 1,
  "interests": ["anime", "jpop"],
  "purposes": ["travel", "work"]
}

### 8. 설정 조회
GET {{baseUrl}}/user/settings
Authorization: Bearer {{login.response.body.data.access_token}}

### 9. 설정 수정
PUT {{baseUrl}}/user/settings
Authorization: Bearer {{login.response.body.data.access_token}}
Content-Type: application/json

{
  "notification_enabled": true,
  "daily_reminder_time": "09:00",
  "preferred_voice_speed": 1.0,
  "show_romaji": true,
  "show_translation": true
}

### ================================
### Sentences API (인증 필요)
### ================================

### 10. 오늘의 문장 세트 조회
GET {{baseUrl}}/sentences/daily
Authorization: Bearer {{login.response.body.data.access_token}}

### 11. 문장 상세 조회
GET {{baseUrl}}/sentences/1
Authorization: Bearer {{login.response.body.data.access_token}}

### ================================
### Learning API (인증 필요)
### ================================

### 12. 학습 진도 조회
GET {{baseUrl}}/learning/progress?sentence_id=1
Authorization: Bearer {{login.response.body.data.access_token}}

### 13. 학습 완료 처리
POST {{baseUrl}}/learning/complete
Authorization: Bearer {{login.response.body.data.access_token}}
Content-Type: application/json

{
  "sentence_id": 1,
  "comprehension_level": 5,
  "time_spent_seconds": 120,
  "notes": "잘 외웠어요"
}

### ================================
### Chat API (인증 필요)
### ================================

### 14. 채팅 세션 생성
POST {{baseUrl}}/chat/sessions
Authorization: Bearer {{login.response.body.data.access_token}}
Content-Type: application/json

{
  "sentence_id": 1
}

### 15. 채팅 세션 목록 조회
GET {{baseUrl}}/chat/sessions
Authorization: Bearer {{login.response.body.data.access_token}}

### 16. 채팅 세션 상세 조회
GET {{baseUrl}}/chat/sessions/1
Authorization: Bearer {{login.response.body.data.access_token}}

### 17. 메시지 전송
POST {{baseUrl}}/chat/sessions/1/messages
Authorization: Bearer {{login.response.body.data.access_token}}
Content-Type: application/json

{
  "content": "こんにちは"
}

### ================================
### Feedback API (인증 필요)
### ================================

### 18. 피드백 제출
POST {{baseUrl}}/feedback
Authorization: Bearer {{login.response.body.data.access_token}}
Content-Type: application/json

{
  "chat_session_id": 1,
  "rating": 5,
  "comment": "매우 유익했습니다",
  "feedback_type": "lesson"
}

### 19. 내 피드백 조회
GET {{baseUrl}}/feedback?chat_session_id=1
Authorization: Bearer {{login.response.body.data.access_token}}

### ================================
### Swagger 문서
### ================================

GET http://localhost:30001/swagger/index.html
